<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Калькулятор времени</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery.flot.min.js"></script>
<script type="text/javascript" src="js/jquery.flot.pie.min.js"></script>
 <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/excanvas.min.js"></script><![endif]-->
<script type="text/javascript" src="js/calc.js"></script>

<script type="text/javascript">
function chartExpenditures(data) {
	$.plot($("#graphByExp"), data, 
	{
		series: {
			pie: { 
				show: true
			}
		},
		legend: {
			show: false
		}
	});
}
</script>

<script>
	function initCalcGui(topLevelDiv) {
		var table = $("<table>")
		topLevelDiv.append(table)

		var head = null
		table.append( head = $("<thead>"))

			head.append($("<tr>").
			append($("<th>").attr("colspan", 2).text("Затраты времени (часов)")))

			var h2 = $("<tr>")
			head.append(h2)

			h2.append($("<th>").text("Занятие"))
			h2.append($("<th>").text("В рабочие дни"))
			h2.append($("<th>").text("На выходных"))

			table.append($("<tbody>").attr("id", "calcInput"))

		topLevelDiv.append(
			$("<button>").attr("id", "calcButton").click(function() {
				results = calculate(); chartExpenditures(results);
			}).text("Посчитать")
		)

		topLevelDiv.append($("<p>"))
		topLevelDiv.append($("<a>").attr("name", "calcResultsAnchor"))

		var results = $("<div>").attr("id", "calcResultsDiv").attr("style", 'visibility:hidden')
		topLevelDiv.append(results)

		results.append($("<h3>").text("На что вы тратите год своей жизни?"))

		var list = $("<ul>").attr("id", "calcResults")
		results.append(list)
		list.append($("<li>"))

		results.append($("<span>").attr("id", "calcRemaining"))

		var graph = $("<div>").attr("id", "graphByExp").attr("style", "width:600px;height:300px")

		results.append(graph)

		initCalc()
	}
</script>

<style media="screen" type="text/css">
.err { color: red; }
</style>
</head>
<body onload="initCalcGui($('#calcGui'))">
	<div id="calcGui">

	</div>
</body>
</html>
